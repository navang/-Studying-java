<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>Ajax 계산기 JSON</title>
	<script  type="text/javascript"  src="../../lib/jquery-3.4.1.min.js"> </script>
	<script type="text/javascript">
	$(function(){
		$('form').submit(function(){
			
			$.ajax({
				type : 'get',
				url  : './jsp/calc-action-json.jsp',
				data : { 
						'op1' : $("#op1").val(),
						'op2' : $("#op2").val(),
						'opr' : $("#opr").val()
				},
				dataType : 'json',
				success  : function(data){					
						$('#result').text(data.result);
				},
				error : function(e){
					alert("에러"+e);
				}
			});
			
			return false; //submit을 막아서 넘기지않게함 
		});
// 		document.forms[0].onsubmit = function(){
			
// 			alert('확인');
// 			return false; // 기존의 submit이벤트 기능 막음 
// 		};
	});
	
	</script>
</head>
<body>

	<form action="./jsp/calc-action.jsp" method="get">
	<input name="op1" id="op1" size="3">
	<select name="opr" id="opr" >
		<option>+</option>
		<option>-</option>
		<option>*</option>
		<option>/</option>
		<option>%</option>
	</select>
	<input name="op2" id="op2" size="3">
	<input type="submit" value=" = ">
	</form>
	<fieldset>
		<legend>실행결과</legend>
		<div id="result"></div>
	</fieldset>

</body>
</html>